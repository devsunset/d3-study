<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>d3.js</title>
		<style>
			svg { width: 320px; height: 130px; border: 1px solid black; }
			#myGraph2 rect {
				stroke : rgb( 160, 0, 0 );
				stroke-width : 1px;
				fill : rgb( 255, 0, 0 );
			}
		</style>
		<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	</head>
	<body>
		<h1>SVG rect</h1>
		<svg>
			<rect x="10" y="30" width="100" height="80" /> <br>
		</svg>

		<h1>가로형 막대그래프</h1>
		<svg id="myGraph1"></svg>

		<h1>가로형 멀티 막대그래프</h1>
		<button id="updateButton">  데이터 업데이트  </button></br>
		<svg id="myGraph2"></svg>
		
		<script>
			// 막대그래프 데이터(데이터 세트)
			var dataSet = [300, 130, 5, 60, 240];

			// 데이터를 기반으로 그리기
			d3.select("#myGraph1")	// SVG 요소를 지정
				.append("rect")	// SVG 사각형 생성
				.attr("x", 0)	// 가로형 막대그래프이므로 X 좌표를 0으로 설정
				.attr("y", 0)	// Y 좌표를 0으로 설정
				.attr("width", dataSet[0])	// 최초 데이터를 기반으로 넓이 설정
				.attr("height", "20px")	// 막대그래프의 높이는 20px로 지정

			// 고정식 멀티 
			/*
			d3.select("#myGraph2")
				.append("rect")
				.attr("x", 0)
				.attr("y", 25)
				.attr("width", dataSet[0])
				.attr("height", "20px")
			d3.select("#myGraph")
				.append("rect")
				.attr("x", 0)
				.attr("y", 50)
				.attr("width", dataSet[1])
				.attr("height", "20px")
			d3.select("#myGraph")
				.append("rect")
				.attr("x", 0)
				.attr("y", 75)
				.attr("width", dataSet[2])
				.attr("height", "20px")
			d3.select("#myGraph")
				.append("rect")
				.attr("x", 0)
				.attr("y", 100)
				.attr("width", dataSet[3])
				.attr("height", "20px")
			d3.select("#myGraph")
				.append("rect")
				.attr("x", 0)
				.attr("y", 125)
				.attr("width", dataSet[4])
				.attr("height", "20px")
			*/

			// 데이터를 기반으로 멀티 그리기
			d3.select("#myGraph2")				// SVG 요소 지정
				.selectAll("rect")					// SVG로 사각형을 표시할 요소를 지정
				.data(dataSet)						// 데이터 설정
				.enter()									// 데이터 수에 따라 rect 요소 생성
				.append("rect")						// SVG 사각형 생성
				.attr("x", 0)							// 가로형 막대그래프이므로 X좌표를 0으로 함
				.attr("y", function(d,i){			// Y 좌표를 배열의 순서에 따라 계산
					return i * 25;					// 막대그래프의 높이를 25px 단위로 계산
				})
				.attr("width", function(d, i){	// 넓이를 배열의 내용에 따라 계산
					return d +"px";					// 데이터의 값을 그대로 넓이로 함
				})
				.attr("height", "20px")			// 막대그래프의 높이를 20px로 지정

			// 버튼 클릭 시의 처리
			d3.select("#updateButton")
				.on("click", function(){
					dataSet = [20, 230, 150, 10, 20];		// 새로운 데이터로 변경
					d3.select("#myGraph2")						// SVG 요소 지정
						.selectAll("rect")							// SVG로 사각형을 표시할 요소를 지정
						.data(dataSet)								// 데이터 설정
						.attr("width", function(d, i){			// 넓이를 배열의 내용에 따라 계산
							return d +"px";							// 데이터의 값을 그대로 넓이로 함
						})
			})

		</script>
	</body>
</html>
