<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Graph - 세로형 막대그래프</title>
		<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
		<style>
			svg { width: 320px; height: 240px; border: 1px solid black; }
			.bar { fill : orange; }
			.barNum {
				font-size: 9pt;
				text-anchor : middle;
			}
            /*
            세로 쓰기 
            .barNum {
				font-size: 9pt;
				text-anchor : end; 
				writing-mode : tb;
				glyph-orientation-vertical : 0
			}
            .barNum {
				font-size: 9pt;
				text-anchor : end; 
				writing-mode : tb;
				glyph-orientation-vertical : 90
			}
            */
            .axis text {
				font-family: sans-serif;
				font-size: 11px;
			}
			.axis path,
			.axis line {
				fill: none;
				stroke: black;
			}
		</style>
	</head>
	<body>
		<h1>세로형 막대그래프를 표시</h1>
		<svg id="myGraph1"></svg>
        <svg id="myGraph2"></svg>
        <svg id="myGraph3"></svg>
        <svg id="myGraph4"></svg>
        <svg id="myGraph5"></svg>
        <svg id="myGraph6"></svg>
        <svg id="myGraph7"></svg>
        <svg id="myGraph8"></svg>
        <svg id="myGraph9"></svg>
        <svg id="myGraph10"></svg>
		<script>
                // 세로 막대그래프 그리기
                var svgHeight = 240;	// SVG 요소의 높이
                var barElements;	// 막대그래프의 막대 요소를 저장할 변수
                var dataSet = [120, 70, 175, 80, 220];
                // 그래프 그리기
                barElements = d3.select("#myGraph1")
                    .selectAll("rect")	// rect 요소를 지정
                    .data(dataSet)	// 데이터를 요소에 연결
                // 데이터 추가
                barElements.enter()	// 데이터 수만큼 반복
                    .append("rect")	// 데이터 수만큼 rect 요소가 추가됨
                    .attr("class", "bar")	// CSS 클래스 설정
                    .attr("height", function(d,i){	// 넓이 설정. 2번째의 파라미터에 함수를 지정
                        return d;	// 데이터 값을 그대로 높이로 지정
                    })
                    .attr("width", 20)	// 넓이 지정
                    .attr("x", function(d, i){
                        return i * 25;		// X 좌표를 표시 순서×25로 함
                    })
                    .attr("y", function(d, i){	// Y 좌표를 지정
                        return svgHeight - d;	// Y 좌표를 계산
                    })

                //  Text 표시 
                var svgHeight = 240;	// SVG 요소의 높이
                var barElements;	// 막대그래프의 막대 요소를 저장할 변수
                var dataSet = [120, 70, 175, 80, 220];
                // 그래프 그리기
                barElements = d3.select("#myGraph2")
                    .selectAll("rect")	// rect 요소를 지정
                    .data(dataSet)	// 데이터를 요소에 연결
                // 데이터 추가
                barElements.enter()	// 데이터 수만큼 반복
                    .append("rect")	// 데이터 수만큼 rect 요소가 추가됨
                    .attr("class", "bar")	// CSS 클래스 설정
                    .attr("height", function(d,i){	// 넓이 설정. 2번째의 파라미터에 함수를 지정
                        return d;	// 데이터 값을 그대로 높이로 지정
                    })
                    .attr("width", 20)	// 넓이 지정
                    .attr("x", function(d, i){
                        return i * 25;		// X 좌표를 표시 순서×25로 함
                    })
                    .attr("y", function(d, i){	// Y 좌표를 지정
                        return svgHeight - d;	// Y 좌표를 계산
                    })
                barElements.enter()	// text 요소 지정●↓
                    .append("text")	// text 요소 추가
                    .attr("class", "barNum")	// CSS 클래스 설정
                    .attr("x", function(d, i){	// X 좌표를 지정
                        return i * 25 + 10;	// 막대그래프의 표시 간격을 맞춤
                    })
                    .attr("y", svgHeight - 5)	// Y 좌표를 지정
                    .text(function(d, i){	// 데이터 표시
                        return d;
                    })

                    // 눈금 그리기
                    var svgHeight = 240;	// SVG 요소의 높이
                    var barElements;	// 막대그래프의 막대 요소를 저장할 변수
                    var dataSet = [120, 70, 175, 80, 220];
                    // 그래프 그리기
                    barElements = d3.select("#myGraph3")
                        .selectAll("rect")	// rect 요소를 지정
                        .data(dataSet)	// 데이터를 요소에 연결
                    // 데이터 추가
                    barElements.enter()	// 데이터 수만큼 반복
                        .append("rect")	// 데이터 수만큼 rect 요소가 추가됨
                        .attr("class", "bar")	// CSS 클래스 설정
                        .attr("height", function(d,i){	// 넓이 설정. 2번째의 파라미터에 함수를 지정
                            return d;	// 데이터 값을 그대로 높이로 지정
                        })
                        .attr("width", 20)	// 넓이 지정
                        .attr("x", function(d, i){
                            return i * 25;		// X좌표를 표시 순서×25로 함
                        })
                        .attr("y", function(d, i){	// Y 좌표를 지정
                            return svgHeight - d;	// Y 좌표를 계산
                        })
                    barElements.enter()	// text 요소 지정
                        .append("text")	// text 요소 추가
                        .attr("class", "barNum")	// CSS 클래스 설정
                        .attr("x", function(d, i){	// X 좌표를 지정
                            return i * 25 + 10;	// 막대그래프의 표시 간격을 맞춤
                        })
                        .attr("y", svgHeight - 5)	// Y 좌표를 지정
                        .text(function(d, i){	// 데이터 표시
                            return d;
                        })
                    // 눈금을 표시하기 위한 스케일 설정●↓
                    var yScale = d3.scale.linear()  // 스케일 설정
                        .domain([0, 300])   // 원래 크기
                        .range([300, 0]) // 실체 출력 크기
                    // 눈금을 설정하여 표시
                    d3.select("#myGraph3").append("g")
                        .attr("class", "axis")
                        .attr("transform", "translate(30, 0)")
                        .call(
                            d3.svg.axis()
                            .scale(yScale)  //스케일 적용
                            .orient("left") //눈금의 표시 위치를 왼쪽으로 지정
                        )

                    // 눈금 출력에 따른 오른쪽으로 위치 이동
                    var svgHeight = 240;	// SVG 요소의 높이
                    var offsetX = 30;	// X 좌표의 오프셋(어긋남의 정도)●
                    var offsetY = 10;	// Y 좌표의 오프셋(어긋남의 정도)●
                    var barElements;	// 막대그래프의 막대 요소를 저장할 변수
                    var dataSet = [120, 70, 175, 80, 220];
                    // 그래프 그리기
                    barElements = d3.select("#myGraph4")
                        .selectAll("rect")	// rect 요소를 지정
                        .data(dataSet)	// 데이터를 요소에 연결
                    // 데이터 추가
                    barElements.enter()	// 데이터 수만큼 반복
                        .append("rect")	// 데이터 수만큼 rect 요소가 추가됨
                        .attr("class", "bar")	// CSS 클래스 설정
                        .attr("height", function(d,i){	// 넓이 설정. 2번째의 파라미터에 함수를 지정
                            return d;	// 데이터 값을 그대로 높이로 지정
                        })
                        .attr("width", 20)	// 넓이 지정
                        .attr("x", function(d, i){
                            return i * 25+offsetX;		// X 좌표를 표시 순서×25+offsetX로 함 ●
                        })
                        .attr("y", function(d, i){	// Y 좌표를 지정
                            return svgHeight - d - offsetY;	// Y 좌표를 계산●
                        })
                    barElements.enter()	// text 요소 지정
                        .append("text")	// text 요소 추가
                        .attr("class", "barNum")	// CSS 클래스 설정
                        .attr("x", function(d, i){	// X 좌표를 지정
                            return i * 25 + 10+offsetX;	// 막대그래프의 표시 간격을 맞춤●
                        })
                        .attr("y", svgHeight - 5-offsetY)	// Y 좌표를 지정●
                        .text(function(d, i){	// 데이터 표시
                            return d;
                        })
                    // 눈금을 표시하기 위한 스케일 설정
                    var yScale = d3.scale.linear()  // 스케일 설정
                        .domain([0, 300])   // 원래 크기
                        .range([300, 0]) // 실체 출력 크기
                    // 눈금을 설정하여 표시
                    d3.select("#myGraph4").append("g")
                        .attr("class", "axis")
                        .attr("transform", "translate("+offsetX+", "+((svgHeight-300)-offsetY)+")")	//●
                        .call(
                            d3.svg.axis()
                            .scale(yScale)  //스케일 적용
                            .orient("left") //눈금의 표시 위치를 왼쪽으로 지정
                        )

        </script>
	</body>
</html>
